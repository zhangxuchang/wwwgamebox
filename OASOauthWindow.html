<!doctype html>
<html>
  <head>
  </head>
  <body>
	<div id="msgLbl">Loading...</div>
    <script type="text/javascript">
    
      document.domain = 'oasgames.com';

      function getParameter(name){
  		var r=new RegExp("(\\?|#|&)"+name+"=([^&#]*)(&|#|$)");
  		var m=location.href.match(r);
  		return(!m?"":m[2]);
  	  }

	  var loginKey = getParameter('loginKey');
	  var loginRes = getParameter('loginRes');
	  var fbfirst  = getParameter('fbfirst');
      
      var _p = function(data){
  		if(window.console) window.console.info(data);
  	  };
    
      if (window.opener && window.opener.OAS_GAMES_JS) {

  			window.opener.OAS_GAMES_JS.commonLogin.loginCallback(loginKey,loginRes,fbfirst);
      		
      }else if(window.parent && window.parent.OAS_GAMES_JS){
          
    	    window.parent.OAS_GAMES_JS.commonLogin.loginCallback(loginKey,loginRes,fbfirst);
      		
      }else{
          
    	 	 _p('window.opener');
    		if(typeof(window.opener) != 'undefined' && window.opener != null){
    			_p(window.opener.location);
    		}

    		_p('window.parent');
    		if(typeof(window.parent) != 'undefined'){
    			_p(window.parent.location.href);
    		}

    		_p('window.refer');
    		_p(document.referrer);

      		document.getElementById('msgLbl').innerHTML = 
          		"Your browser seems to be stopping this window from communicating with the main window." +
          		"<br/><br/>(loginKey=" + loginKey + "<br/>loginRes="+loginRes+"<br/>fbfirst="+fbfirst + ')';

      }
    </script>
  
  </body>
</html>
